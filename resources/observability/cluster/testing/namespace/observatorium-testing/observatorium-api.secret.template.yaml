---
apiVersion: v1
kind: Template
metadata:
  name: observatorium-testing-api-secret
objects:
  - apiVersion: v1
    kind: Secret
    metadata:
      name: ${SECRET_NAME}
      annotations:
        qontract.recycle: "true"
    stringData:
      client-id: ${CLIENT_ID}
      client-secret: ${CLIENT_SECRET}
      issuer-url: https://sso.redhat.com/auth/realms/redhat-external
      tenants.yaml: >-
        tenants:
          - id: 0fc2b00e-201b-4c17-b9f2-19d91adc4fd2
            name: rhobs
            oidc:
              clientID: ${CLIENT_ID}
              clientSecret: ${CLIENT_SECRET}
              issuerURL: https://sso.redhat.com/auth/realms/redhat-external
              redirectURL: https://observatorium.apps.rhobs-testing.qqzf.p1.openshiftapps.com/oidc/rhobs/callback
              usernameClaim: preferred_username
              groupClaim: email
parameters:
  - name: SECRET_NAME
  - name: CLIENT_ID
  - name: CLIENT_SECRET
