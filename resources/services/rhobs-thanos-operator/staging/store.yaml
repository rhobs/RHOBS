apiVersion: template.openshift.io/v1
kind: Template
metadata:
  creationTimestamp: null
  name: thanos-store
objects:
- apiVersion: monitoring.thanos.io/v1alpha1
  kind: ThanosStore
  metadata:
    creationTimestamp: null
    name: default
    namespace: rhobs-stage
  spec:
    additionalArgs:
    - |-
      --tracing.config="config":
        "sampler_param": 2
        "sampler_type": "ratelimiting"
        "service_name": "thanos-store"
      "type": "JAEGER"
    additionalContainers:
    - args:
      - --reporter.grpc.host-port=dns:///otel-trace-writer-collector-headless.observatorium-tools.svc:14250
      - --reporter.type=grpc
      - --agent.tags=pod.namespace=$(NAMESPACE),pod.name=$(POD)
      env:
      - name: NAMESPACE
        valueFrom:
          fieldRef:
            fieldPath: metadata.namespace
      - name: POD
        valueFrom:
          fieldRef:
            fieldPath: metadata.name
      image: registry.redhat.io/rhosdt/jaeger-agent-rhel8:1.57.0-10
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 5
        httpGet:
          path: /
          port: 14271
          scheme: HTTP
        initialDelaySeconds: 1
      name: jaeger-agent
      ports:
      - containerPort: 5778
        name: configs
      - containerPort: 6831
        name: jaeger-thrift
      - containerPort: 14271
        name: metrics
      readinessProbe:
        httpGet:
          path: /
          port: 14271
          scheme: HTTP
        initialDelaySeconds: 1
      resources:
        limits:
          cpu: 128m
          memory: 128Mi
        requests:
          cpu: 32m
          memory: 64Mi
    blockConfig:
      blockDiscoveryStrategy: concurrent
      blockFilesConcurrency: 1
      blockMetaFetchConcurrency: 32
    featureGates:
      serviceMonitor:
        enable: false
    ignoreDeletionMarksDelay: 24h
    image: quay.io/redhat-user-workloads/rhobs-mco-tenant/rhobs-thanos
    imagePullPolicy: IfNotPresent
    indexHeaderConfig:
      enableLazyReader: true
      lazyDownloadStrategy: lazy
      lazyReaderIdleTimeout: 5m
    logFormat: logfmt
    logLevel: info
    maxTime: -22h
    objectStorageConfig:
      key: thanos.yaml
      name: default-objectstorage
      optional: false
    replicas: 3
    resourceRequirements:
      limits:
        cpu: 250m
        memory: 2Gi
      requests:
        cpu: 50m
        memory: 512Mi
    shardingStrategy:
      shards: 1
      type: block
    storageSize: 512Mi
    storeLimitsOptions: {}
    version: c7c3ef94c51d518bb6056d3ad416d7b4f39559f3
  status: {}
- apiVersion: monitoring.thanos.io/v1alpha1
  kind: ThanosStore
  metadata:
    creationTimestamp: null
    name: telemeter-0to2w
    namespace: rhobs-stage
  spec:
    additionalArgs:
    - |-
      --tracing.config="config":
        "sampler_param": 2
        "sampler_type": "ratelimiting"
        "service_name": "thanos-store"
      "type": "JAEGER"
    additionalContainers:
    - args:
      - --reporter.grpc.host-port=dns:///otel-trace-writer-collector-headless.observatorium-tools.svc:14250
      - --reporter.type=grpc
      - --agent.tags=pod.namespace=$(NAMESPACE),pod.name=$(POD)
      env:
      - name: NAMESPACE
        valueFrom:
          fieldRef:
            fieldPath: metadata.namespace
      - name: POD
        valueFrom:
          fieldRef:
            fieldPath: metadata.name
      image: registry.redhat.io/rhosdt/jaeger-agent-rhel8:1.57.0-10
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 5
        httpGet:
          path: /
          port: 14271
          scheme: HTTP
        initialDelaySeconds: 1
      name: jaeger-agent
      ports:
      - containerPort: 5778
        name: configs
      - containerPort: 6831
        name: jaeger-thrift
      - containerPort: 14271
        name: metrics
      readinessProbe:
        httpGet:
          path: /
          port: 14271
          scheme: HTTP
        initialDelaySeconds: 1
      resources:
        limits:
          cpu: 128m
          memory: 128Mi
        requests:
          cpu: 32m
          memory: 64Mi
    blockConfig:
      blockDiscoveryStrategy: concurrent
      blockFilesConcurrency: 1
      blockMetaFetchConcurrency: 32
    featureGates:
      serviceMonitor:
        enable: false
    ignoreDeletionMarksDelay: 24h
    image: quay.io/redhat-user-workloads/rhobs-mco-tenant/rhobs-thanos
    imagePullPolicy: IfNotPresent
    indexHeaderConfig:
      enableLazyReader: true
      lazyDownloadStrategy: lazy
      lazyReaderIdleTimeout: 5m
    logFormat: logfmt
    logLevel: info
    maxTime: -2w
    objectStorageConfig:
      key: thanos.yaml
      name: telemeter-objectstorage
      optional: false
    replicas: 3
    resourceRequirements:
      limits:
        cpu: 250m
        memory: 2Gi
      requests:
        cpu: 50m
        memory: 512Mi
    shardingStrategy:
      shards: 1
      type: block
    storageSize: 512Mi
    storeLimitsOptions:
      storeLimitsRequestSamples: 627040000
      storeLimitsRequestSeries: 1000000
    version: c7c3ef94c51d518bb6056d3ad416d7b4f39559f3
  status: {}
- apiVersion: monitoring.thanos.io/v1alpha1
  kind: ThanosStore
  metadata:
    creationTimestamp: null
    name: telemeter-2wto90d
    namespace: rhobs-stage
  spec:
    additionalArgs:
    - |-
      --tracing.config="config":
        "sampler_param": 2
        "sampler_type": "ratelimiting"
        "service_name": "thanos-store"
      "type": "JAEGER"
    additionalContainers:
    - args:
      - --reporter.grpc.host-port=dns:///otel-trace-writer-collector-headless.observatorium-tools.svc:14250
      - --reporter.type=grpc
      - --agent.tags=pod.namespace=$(NAMESPACE),pod.name=$(POD)
      env:
      - name: NAMESPACE
        valueFrom:
          fieldRef:
            fieldPath: metadata.namespace
      - name: POD
        valueFrom:
          fieldRef:
            fieldPath: metadata.name
      image: registry.redhat.io/rhosdt/jaeger-agent-rhel8:1.57.0-10
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 5
        httpGet:
          path: /
          port: 14271
          scheme: HTTP
        initialDelaySeconds: 1
      name: jaeger-agent
      ports:
      - containerPort: 5778
        name: configs
      - containerPort: 6831
        name: jaeger-thrift
      - containerPort: 14271
        name: metrics
      readinessProbe:
        httpGet:
          path: /
          port: 14271
          scheme: HTTP
        initialDelaySeconds: 1
      resources:
        limits:
          cpu: 128m
          memory: 128Mi
        requests:
          cpu: 32m
          memory: 64Mi
    blockConfig:
      blockDiscoveryStrategy: concurrent
      blockFilesConcurrency: 1
      blockMetaFetchConcurrency: 32
    featureGates:
      serviceMonitor:
        enable: false
    ignoreDeletionMarksDelay: 24h
    image: quay.io/redhat-user-workloads/rhobs-mco-tenant/rhobs-thanos
    imagePullPolicy: IfNotPresent
    indexHeaderConfig:
      enableLazyReader: true
      lazyDownloadStrategy: lazy
      lazyReaderIdleTimeout: 5m
    logFormat: logfmt
    logLevel: info
    maxTime: -90d
    minTime: -2w
    objectStorageConfig:
      key: thanos.yaml
      name: telemeter-objectstorage
      optional: false
    replicas: 3
    resourceRequirements:
      limits:
        cpu: 250m
        memory: 2Gi
      requests:
        cpu: 50m
        memory: 512Mi
    shardingStrategy:
      shards: 1
      type: block
    storageSize: 512Mi
    storeLimitsOptions:
      storeLimitsRequestSamples: 627040000
      storeLimitsRequestSeries: 1000000
    version: c7c3ef94c51d518bb6056d3ad416d7b4f39559f3
  status: {}
- apiVersion: monitoring.thanos.io/v1alpha1
  kind: ThanosStore
  metadata:
    creationTimestamp: null
    name: telemeter-90dplus
    namespace: rhobs-stage
  spec:
    additionalArgs:
    - |-
      --tracing.config="config":
        "sampler_param": 2
        "sampler_type": "ratelimiting"
        "service_name": "thanos-store"
      "type": "JAEGER"
    additionalContainers:
    - args:
      - --reporter.grpc.host-port=dns:///otel-trace-writer-collector-headless.observatorium-tools.svc:14250
      - --reporter.type=grpc
      - --agent.tags=pod.namespace=$(NAMESPACE),pod.name=$(POD)
      env:
      - name: NAMESPACE
        valueFrom:
          fieldRef:
            fieldPath: metadata.namespace
      - name: POD
        valueFrom:
          fieldRef:
            fieldPath: metadata.name
      image: registry.redhat.io/rhosdt/jaeger-agent-rhel8:1.57.0-10
      imagePullPolicy: IfNotPresent
      livenessProbe:
        failureThreshold: 5
        httpGet:
          path: /
          port: 14271
          scheme: HTTP
        initialDelaySeconds: 1
      name: jaeger-agent
      ports:
      - containerPort: 5778
        name: configs
      - containerPort: 6831
        name: jaeger-thrift
      - containerPort: 14271
        name: metrics
      readinessProbe:
        httpGet:
          path: /
          port: 14271
          scheme: HTTP
        initialDelaySeconds: 1
      resources:
        limits:
          cpu: 128m
          memory: 128Mi
        requests:
          cpu: 32m
          memory: 64Mi
    blockConfig:
      blockDiscoveryStrategy: concurrent
      blockFilesConcurrency: 1
      blockMetaFetchConcurrency: 32
    featureGates:
      serviceMonitor:
        enable: false
    ignoreDeletionMarksDelay: 24h
    image: quay.io/redhat-user-workloads/rhobs-mco-tenant/rhobs-thanos
    imagePullPolicy: IfNotPresent
    indexHeaderConfig:
      enableLazyReader: true
      lazyDownloadStrategy: lazy
      lazyReaderIdleTimeout: 5m
    logFormat: logfmt
    logLevel: info
    minTime: -90d
    objectStorageConfig:
      key: thanos.yaml
      name: telemeter-objectstorage
      optional: false
    replicas: 3
    resourceRequirements:
      limits:
        cpu: 250m
        memory: 2Gi
      requests:
        cpu: 50m
        memory: 512Mi
    shardingStrategy:
      shards: 1
      type: block
    storageSize: 512Mi
    storeLimitsOptions:
      storeLimitsRequestSamples: 627040000
      storeLimitsRequestSeries: 1000000
    version: c7c3ef94c51d518bb6056d3ad416d7b4f39559f3
  status: {}
